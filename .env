# Step 1 optional reporting (not used in signatures)
WITH_MASSPROPS=1
DEFAULT_DENSITY_KG_M3=7850
MASSPROPS_DEBUG=0


# Meshing (Step 2)
STL_LINEAR_DEFLECTION=0.25
STL_ANGULAR_DEFLECTION=0.35
STL_ASCII=0
PREVIEW_MESH_DEFLECTION=50
FULL_MESH_DEFLECTION=999999  # effectively disable full if you kept it
MAX_ASSEMBLY_STL_MB=20
PREFLIGHT_TARGET_STL_MB=80
PREFLIGHT_MAX_STL_MB=200
PREFLIGHT_DEFLECTION_START=150
PREFLIGHT_DEFLECTION_MAX=1200
PREFLIGHT_DEFLECTION_ITERS=4
PREFLIGHT_BIG_STEP_MB=50
PREFLIGHT_KEEP_STL_MAX_MB=20
PREFLIGHT_RENDER_MAX_FACES=250000
PREFLIGHT_HLR_MAX_EDGES=40000
PREFLIGHT_HLR_SAMPLES_PER_EDGE=14
PREFLIGHT_STL_DEFLECTION_BIG_FALLBACK=1200

# --- common run folder layout ---
RUNS_DIR=/app/ui_runs
STATUS_REL=status.json
PROGRESS_REL=progress.log

# --- stl export worker ---
WORKER_SLEEP_SEC=2.0
STL_EXPORT_TRIGGER_STAGES=ready
STL_EXPORT_HEARTBEAT_SEC=10.0

# exporter command template
EXPORT_STL_CMD=python /repo/export_stl_xcaf.py --step-path "{step}" --out-dir "{out}" --xcaf-json "{xcaf}"

# pass-through for exporter
STL_LINEAR_DEFLECTION=2.0
STL_ANGULAR_DEFLECTION=0.5
STL_ASCII=0
USE_SIG_FREE=0



# Part-id bbox quantization (Step 1 + Step 2 must match)
BBOX_TOL_MM=0.1

# Default behavior
USE_SIG_FREE=1
SKIP_CHIRALITY=0

#brep_signature debug
SIG_DEBUG=0

# Optional simple material overrides (substring match)
DENSITY_STAINLESS_KG_M3=8000
DENSITY_ALUMINIUM_KG_M3=2700
DENSITY_GALV_KG_M3=7850
STEP4_STEEL_DENSITY_MIN=7000
STEP4_STEEL_DENSITY_MAX=8500

# step 4

# Generate unknown gallery by default (optional)
STEP4_UNKNOWN_GALLERY=1
STEP4_UNKNOWN_GALLERY_MAX=800

# Step 4 plate detection
STEP4_PLATE_THICK_MAX_MM=30
STEP4_PLATE_THIN_RATIO=0.10
STEP4_PLATE_MIN_SPAN_MM=50

# Step 4 geometry fallback
STEP4_SECTION_LEN_RATIO=4.0
STEP4_HARDWARE_MAX_DIM_MM=200
STEP4_HARDWARE_MAX_MASS_KG=5

# Step 4 grating detection (mass-based)
# solidity = (actual kg/m2) / (solid plate kg/m2 at same thickness)
# lower => more open => grating-like
STEP4_GRATING_SOLIDITY_MAX=0.55